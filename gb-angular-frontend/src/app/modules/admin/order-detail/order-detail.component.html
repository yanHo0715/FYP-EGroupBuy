<!--<p>order-details works!</p>-->
<div class="page-content">
<!--  <h3>Order Details</h3>-->

  <div class="card card-primary card-outline" style="margin-top: 7px">
    <div class="card-header" style="padding-top: 5px; padding-bottom: 7px">
      <div class="card-title" style="font-size: 25px"><span>Order Details</span></div>
    </div>

    <div class="card-body">
      <div class="d-flex">
        <p>Order ID: <strong>#{{order?order.order_id:''}}</strong></p>
        <p class="ms-auto">Placed on: <strong>{{order? formatDate(order.order_date, 'dd/MM/yyyy HH:mm:ss', 'en-US'):''}}</strong></p>
      </div>
      <div class="table-responsive">
        <table class="table mb-0">
          <thead class="table-light">
          <tr>
            <th>Item ID</th>
            <th>Image</th>
            <th style="max-width: 300px !important;">Product/Package Name</th>
            <th>Product/Package ID</th>
            <th>Sell Type</th>
            <th>Unit Price</th>
            <th>Quantity</th>
            <th>Subtotal</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let p of orderDetails; let i = index">
            <td>#{{p.order_details_id}}</td>
            <td>
              <img src="{{p.product_image_url}}" alt="" style="height:40px; max-width:50px; margin-right: 5px">
            </td>
            <td style="max-width: 300px !important;">
              <h6 *ngIf="p.sell_type == 'S'" class="mb-0 font-14">{{p.product_title}}</h6>
              <h6 *ngIf="p.sell_type == 'G'" class="mb-0 font-14">{{p.product_title}}</h6>
              <h6 *ngIf="p.sell_type == 'P'" class="mb-0 font-14">{{p.package_grp_name}} <br *ngIf="p.package_grp_name" />{{p.package_name}}</h6>
            </td>
            <td>
              <h6 *ngIf="p.sell_type == 'S'" class="mb-0 font-14">#{{p.product_id}}</h6>
              <h6 *ngIf="p.sell_type == 'G'" class="mb-0 font-14">#{{p.product_id}}</h6>
              <h6 *ngIf="p.sell_type == 'P'" class="mb-0 font-14">#{{p.package_id}}</h6>
            </td>
            <td>
              <img *ngIf="p.sell_type == 'S'" src="assets/smartgroup/img/price-tag-01.5.png" alt="" height=30px width=30px style="margin-right: 10px" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Single Product">
              <img *ngIf="p.sell_type == 'G'" src="assets/smartgroup/img/group-buy-01.png" alt="" height=30px width=30px style="margin-right: 10px" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Group Buying offers on single product">
              <img *ngIf="p.sell_type == 'P'" src="assets/smartgroup/img/groupbuy-packages-02.png" alt="" height=30px width=30px style="margin-right:10px" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Group Buying offers on sub-packages">
            </td>
            <td>{{curSymbol}}{{p.product_unit_price | number: '1.2-2'}}</td>
            <td>{{p.quantity}}</td>
            <td>{{curSymbol}}{{p.sub_total | number: '1.2-2'}}</td>
            <td>
              <div [class]="p.status=='Canceled' ? 'text-danger bg-light-danger' : p.status=='Delivered' ? 'text-success bg-light-success' : 'text-primary bg-light-primary'"
                   class="badge rounded-pill p-2 text-uppercase px-3" style="margin-left: -15px">
                <i class='bx bxs-circle me-1'></i>{{p.status}}
              </div>
            </td>
            <td>
              <select #_status class="form-select" name="actions" id="actions"
                      (change)="onStatusChange(i, _status.value)" [disabled]="p.status !='Shipped'">
                <option *ngIf="p.status=='Pending'" [selected]="p.status=='Pending'"
                        value="Pending">Pending</option>
                <option *ngIf="p.status=='Canceled'" [selected]="p.status=='Canceled'"
                        value="Canceled">Canceled</option>
                <option *ngIf="p.status=='Processing'" [selected]="p.status=='Processing'"
                        value="Processing">Processing</option>
                <option *ngIf="p.status=='Shipped'" [selected]="p.status=='Shipped'"
                        value="Shipped">Shipped</option>
                <option [selected]="p.status=='Delivered'" value="Delivered">Delivered</option>
              </select>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-6" style="padding-right: 0px">
      <div class="card" style="margin-top: 10px">
        <div class="card-body">
          <h5>Shipping Address</h5>
          <hr>
          <p>Address: {{order?order.shipping_address:''}}</p>
          <p>Country: {{order?order.shipping_country:''}}</p>
          <p>Post Code: {{order?order.shipping_post_code:''}}</p>
          <!--<p>District: {{order.shippingCity}}</p>
          <p>Division: {{order.shippingState}}</p>-->
        </div>
      </div>
    </div>
    <div class="col-6">
      <div class="card" style="margin-top: 10px">
        <div class="card-body">
          <h5>Order Summary</h5>
          <hr>
          <table class="table table-borderless">
            <tbody>
            <tr>
              <th>Sub Total</th>
              <td class="text-end">{{curSymbol}}{{order?order.sub_total.toFixed(2):''}}</td>
            </tr>
            <tr>
              <th>Shipping Charge</th>
              <td class="text-end">{{curSymbol}}{{order?order.shipping_fee.toFixed(2):''}}</td>
            </tr>
            <tr>
              <th>Gateway Fee</th>
              <td class="text-end">{{curSymbol}}{{order?order.gateway_fee.toFixed(2):''}}</td>
            </tr>
            <tr>
              <th>Tax (20%)</th>
              <td class="text-end">{{curSymbol}}{{order?order.tax.toFixed(2):''}}</td>
            </tr>
            <!--<tr>
              <th>Discount</th>
              <td class="text-end">Â£{{order.discount.toFixed(2)}}</td>
            </tr>-->
            <tr>
              <th>Total</th>
              <td class="text-end"><strong>{{curSymbol}}{{order?order.order_total.toFixed(2):''}}</strong></td>
            </tr>
            </tbody>
          </table>
          <hr>
          <p>Paid by {{order?order.payment_method:''}}</p>
        </div>
      </div>
    </div>
  </div>
</div>
